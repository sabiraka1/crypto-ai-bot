# CRYPTO-AI-BOT ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞

Production-grade —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç (—è–¥—Ä–æ) –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞: —Å—Ç—Ä–æ–≥–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å–æ–±—ã—Ç–∏–π–Ω–∞—è —à–∏–Ω–∞ —Å –ø–æ—Ä—è–¥–∫–æ–º –ø–æ –∫–ª—é—á—É, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –º–µ—Ç—Ä–∏–∫–∏/health, —á–∏—Å—Ç—ã–π DI –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–∏. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É–∂–µ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏ (**23 passed**).

---

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ß—ë—Ç–∫–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ (–±–µ–∑ –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏):**
  - `create_market_buy_quote(symbol, quote_amount)` ‚Üí —Å—É–º–º–∞ **–≤ –∫–æ—Ç–∏—Ä—É–µ–º–æ–π –≤–∞–ª—é—Ç–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, USDT).
  - `create_market_sell_base(symbol, base_amount)` ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **–≤ –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, BTC).
- **–°–æ–±—ã—Ç–∏–π–Ω–∞—è —à–∏–Ω–∞ (EventBus):**
  - Per-key ordering (—Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ –≤–Ω—É—Ç—Ä–∏ `(topic, key)`), –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –º–µ–∂–¥—É –∫–ª—é—á–∞–º–∏.
  - –õ–µ–Ω–∏–≤—ã–π —Å—Ç–∞—Ä—Ç –≤–æ—Ä–∫–µ—Ä–æ–≤ (–Ω–∞–¥—ë–∂–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º DI/—Ç–µ—Å—Ç–∞—Ö).
  - DLQ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏.
  - –†–µ—Ç—Ä–∞–∏ –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –±—ç–∫-–æ—Ñ—Ñ–æ–º.
- **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π:** —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ —Å –±–∞–∫–µ—Ç–∏–∑–∞—Ü–∏–µ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏, TTL.
- **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ –∑–∞—â–∏—Ç–Ω—ã–µ –≤—ã—Ö–æ–¥—ã:** cooldown, —Å–ø—Ä–µ–¥-—Ñ–∏–ª—å—Ç—Ä, `ProtectiveExits` (TP/SL-–ø–ª–∞–Ω).
- **–°–∏–≥–Ω–∞–ª—ã:** –±–∞–∑–æ–≤—ã–µ —Ñ–∏—á–∏ (SMA/EMA/—Å–ø—Ä–µ–¥), –ø–æ–ª–∏—Ç–∏–∫–∞ `buy/sell/hold`.
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** SQLite + –º–∏–≥—Ä–∞—Ü–∏–∏, —Ñ–∞—Å–∞–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (trades, positions, market_data, audit, idempotency).
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** `/health` –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç DB/–º–∏–≥—Ä–∞—Ü–∏–∏/–±—Ä–æ–∫–µ—Ä/EventBus, `/metrics` ‚Äî Prometheus –∏–ª–∏ JSON fallback.
- **DI –∏ —Å–µ—Ä–≤–µ—Ä:** FastAPI (`/live`, `/ready`, `/health`, `/status`, `/metrics`, `/telegram/webhook`).
- **–¢–µ—Å—Ç—ã:** unit + integration, –±—ã—Å—Ç—Ä—ã–π —Å–º–æ–∫-—Å–∫—Ä–∏–ø—Ç.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

src/crypto_ai_bot/
‚îú‚îÄ app/
‚îÇ ‚îú‚îÄ compose.py # DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, lifecycle (startup/shutdown)
‚îÇ ‚îú‚îÄ server.py # FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ ‚îî‚îÄ adapters/telegram.py # –ø–∞—Ä—Å–µ—Ä /eval, /buy <USDT>, /sell [BASE]
‚îú‚îÄ core/
‚îÇ ‚îú‚îÄ events/
‚îÇ ‚îÇ ‚îî‚îÄ bus.py # AsyncEventBus: per-key order, DLQ, lazy start
‚îÇ ‚îú‚îÄ brokers/
‚îÇ ‚îÇ ‚îú‚îÄ backtest_exchange.py
‚îÇ ‚îÇ ‚îî‚îÄ ccxt_exchange.py # live-—Ä–µ–∂–∏–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, Gate.io)
‚îÇ ‚îú‚îÄ storage/
‚îÇ ‚îÇ ‚îú‚îÄ sqlite_adapter.py
‚îÇ ‚îÇ ‚îú‚îÄ migrations/
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ runner.py
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ 0001_init.sql # —á–∏—Å—Ç—ã–π SQL (–±–µ–∑ markdown-—Ñ–µ–Ω—Å–æ–≤)
‚îÇ ‚îÇ ‚îî‚îÄ repositories/ # idempotency, trades, positions, market_data, audit
‚îÇ ‚îú‚îÄ use_cases/ # evaluate, place_order, execute_trade, reconcile, eval_and_execute
‚îÇ ‚îú‚îÄ risk/ # RiskManager, ProtectiveExits
‚îÇ ‚îú‚îÄ signals/ # _build (SMA/EMA/—Å–ø—Ä–µ–¥), policy
‚îÇ ‚îú‚îÄ monitoring/ # HealthChecker
‚îÇ ‚îî‚îÄ analytics/ # PnL/–º–µ—Ç—Ä–∏–∫–∏ –æ—Ç—á—ë—Ç–∞
‚îî‚îÄ utils/ # time, ids, logging, metrics, retry, circuit_breaker, exceptions

makefile
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

–¢–µ—Å—Ç—ã:
tests/
‚îú‚îÄ unit/
‚îú‚îÄ integration/
‚îî‚îÄ conftest.py

yaml
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python **3.12+** (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å 3.13)
- FastAPI, httpx, pydantic (–≤ —Å–æ—Å—Ç–∞–≤–µ FastAPI), sqlite3
- (–æ–ø—Ü.) prometheus_client ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π `/metrics`
- ccxt ‚Äî –¥–ª—è live-–±–∏—Ä–∂ (–≤ dev –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- pytest, anyio/pytest-asyncio ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1) –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone <your-repo-url>
cd crypto-ai-bot

# 2) –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python -m venv .venv
# Windows:
.venv\Scripts\activate
# Linux/macOS:
source .venv/bin/activate

# 3) –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
pip install -r requirements-dev.txt
Windows —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –ø—É—Ç–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–≤—ã—á–∫–∏:

bat
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
cd "C:\Users\<USERNAME>\Documents\GitHub\crypto-ai-bot"
üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (ENV)
–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. core/settings.py):

ENV	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ	–ü—Ä–∏–º–µ—Ä
MODE	paper | live	paper
EXCHANGE	–∏–º—è –±–∏—Ä–∂–∏ –¥–ª—è live (ccxt)	gateio
SYMBOL	—Ç–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞	BTC/USDT
DB_PATH	–ø—É—Ç—å –∫ SQLite –ë–î	./crypto_ai_bot.db
FIXED_AMOUNT	–¥–µ—Ñ–æ–ª—Ç–Ω–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏ (quote)	10
IDEMPOTENCY_BUCKET_MS	—à–∏—Ä–∏–Ω–∞ –±–∞–∫–µ—Ç–∞ –¥–ª—è –∫–ª—é—á–µ–π	60000
IDEMPOTENCY_TTL_SEC	TTL –∫–ª—é—á–µ–π –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏	60
API_KEY / API_SECRET	–∫–ª—é—á–∏ –¥–ª—è live-—Ä–µ–∂–∏–º–∞	...
TELEGRAM_ENABLED	1 –≤–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–∞	0

Settings.load() ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ —á—Ç–µ–Ω–∏—è ENV; –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî –≤ core/validators/settings.py.

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
uvicorn crypto_ai_bot.app.server:app --reload
# –û—Ç–∫—Ä–æ–π:
# GET /live   ‚Üí {"ok": true}
# GET /ready  ‚Üí 200/503 (DB & –º–∏–≥—Ä–∞—Ü–∏–∏)
# GET /health ‚Üí –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç (DB/–º–∏–≥—Ä–∞—Ü–∏–∏/–±—Ä–æ–∫–µ—Ä/EventBus)
# GET /metrics ‚Üí Prometheus-—Ç–µ–∫—Å—Ç –∏–ª–∏ JSON fallback (PnL-–æ—Ç—á—ë—Ç)
# GET /status  ‚Üí –∫—Ä–∞—Ç–∫–∏–π —Å—Ç–∞—Ç—É—Å/—Å—á—ë—Ç—á–∏–∫–∏
Telegram webhook:

–í–∫–ª—é—á–∏—Ç—å: TELEGRAM_ENABLED=1

POST /telegram/webhook –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π update –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã:

/eval

/buy <USDT> (—Å—É–º–º–∞ –≤ –∫–æ—Ç–∏—Ä—É–µ–º–æ–π –≤–∞–ª—é—Ç–µ)

/sell [BASE] (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç–µ; –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ‚Äî –≤—Å—è –ø–æ–∑–∏—Ü–∏—è)

üß™ –¢–µ—Å—Ç—ã –∏ —Å–º–æ–∫-–ø—Ä–æ–≥–æ–Ω
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
pytest -q
# –∏–ª–∏ –ø–æ –≥—Ä—É–ø–ø–∞–º:
pytest -q tests/unit
pytest -q tests/integration
–°–º–æ–∫-—Å–∫—Ä–∏–ø—Ç:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
python -m crypto_ai_bot.app.dev_smoke
# –í—ã–ø–æ–ª–Ω–∏—Ç BUY ‚Üí SELL ‚Üí –≤—ã–≤–µ–¥–µ—Ç PnL –∏ HEALTH
pytest.ini —Å–æ–¥–µ—Ä–∂–∏—Ç pythonpath = src, –ø–æ—ç—Ç–æ–º—É –∏–º–ø–æ—Ä—Ç—ã –ø–∞–∫–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ.

üß† EventBus ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
Per-key ordering ‚Äî –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–≥–∏–π –≤–Ω—É—Ç—Ä–∏ (topic, key).

–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º ‚Äî —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –≤–æ—Ä–∫–µ—Ä–∞–º–∏.

–õ–µ–Ω–∏–≤—ã–π —Å—Ç–∞—Ä—Ç ‚Äî –≤–æ—Ä–∫–µ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ event loop (—É—Å—Ç–æ–π—á–∏–≤–æ –≤ DI/pytest).

–†–µ—Ç—Ä–∞–∏ ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (TransientError, ConnectionError, TimeoutError, asyncio.TimeoutError) —Ä–µ—Ç—Ä–∞—è—Ç—Å—è —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –±—ç–∫-–æ—Ñ—Ñ–æ–º.

DLQ ‚Äî –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ø–æ–ø—ã—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–µ —É—Ö–æ–¥–∏—Ç –≤ DLQ; –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ subscribe_dlq().

üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ Health
/metrics:

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω prometheus_client ‚Äî –æ—Ç–¥–∞—ë—Ç—Å—è Prometheus-—Ç–µ–∫—Å—Ç.

–ò–Ω–∞—á–µ ‚Äî JSON fallback (PnL-–æ—Ç—á—ë—Ç –∏–∑ core/analytics/metrics.py).

HealthChecker –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î –∏ —Ç–∞–±–ª–∏—Ü—ã –º–∏–≥—Ä–∞—Ü–∏–π,

fetch_ticker –±—Ä–æ–∫–µ—Ä–∞,

loopback-–ø—É–±–ª–∏–∫–∞—Ü–∏—é EventBus (–µ—Å–ª–∏ –µ—Å—Ç—å —à–∏–Ω–∞),

clock drift (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –∑–∞–º–µ—Ä).

üìö –ú–∏–≥—Ä–∞—Ü–∏–∏ (SQLite)
–ú–∏–≥—Ä–∞—Ü–∏–∏ —á–∏—Ç–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ importlib.resources –∏–∑ –ø–∞–∫–µ—Ç–∞ core/storage/migrations.
–í–∞–∂–Ω–æ: 0001_init.sql ‚Äî —á–∏—Å—Ç—ã–π SQL, –±–µ–∑ markdown-—Ñ–µ–Ω—Å–æ–≤ –∏ # –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ --).

–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ app/compose.py –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

üîí Live-—Ä–µ–∂–∏–º (ccxt)
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ccxt, –∑–∞–¥–∞–π—Ç–µ MODE=live, EXCHANGE, API_KEY, API_SECRET.

BUY ‚Äî —Å—É–º–º–∞ –≤ quote; SELL ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ base.

–ü—Ä–æ–≤–µ—Ä—å precision/–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∏—Ä–∂–∏.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–π dry-run –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞).

üß∞ Makefile / CI / –õ–∏–Ω—Ç–∏–Ω–≥
–ï—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:

Makefile ‚Äî —Ü–µ–ª–∏ make test, make run, make fmt, make lint.

GitHub Actions (.github/workflows/ci.yml) ‚Äî –ª–∏–Ω—Ç/—Ç–∏–ø—ã/—Ç–µ—Å—Ç—ã/coverage.

pyproject.toml ‚Äî –∫–æ–Ω—Ñ–∏–≥–∏ ruff, mypy, coverage.

üÜò Troubleshooting
unrecognized token: "#" –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏—è—Ö ‚Äî –≤ 0001_init.sql –æ—Å—Ç–∞–ª–∏—Å—å –º–∞—Ä–∫–¥–∞—É–Ω-—Ñ–µ–Ω—Å—ã. –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π SQL –∏ -- –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

RuntimeError: no running event loop ‚Äî –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö —à–∏–Ω—ã –≤–æ—Ä–∫–µ—Ä—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤ __init__. –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ EventBus ‚Äî –ª–µ–Ω–∏–≤—ã–π —Å—Ç–∞—Ä—Ç, –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞.

Windows –ø—É—Ç–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–≤—ã—á–∫–∏ –≤ cd "C:\Users\...".

SQLite lock ‚Äî –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã: await bus.close(), broker.close() (–µ—Å–ª–∏ async), conn.close().

üìú –õ–∏—Ü–µ–Ω–∑–∏—è
¬© –í—ã–±–æ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏ –∑–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.