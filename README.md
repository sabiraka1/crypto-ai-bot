# crypto-ai-bot

**ะะตััะธั**: 1.0-beta (2025-01-10)

## ะะณะปะฐะฒะปะตะฝะธะต
- [ะงัะพ ััะพ](#ััะพ-ััะพ)
- [ะััะธัะตะบัััะฝัะต ะพะณัะฐะฝะธัะตะฝะธั](#ะฐััะธัะตะบัััะฝัะต-ะพะณัะฐะฝะธัะตะฝะธั-ะบัะธัะธัะฝะพ)
- [ะัะฝะพะฒะฝัะต ัะฐัะฐะบัะตัะธััะธะบะธ](#ะพัะฝะพะฒะฝัะต-ัะฐัะฐะบัะตัะธััะธะบะธ)
- [ะััะธัะตะบัััะฝัะต ะฟัะธะฝัะธะฟั](#ะฐััะธัะตะบัััะฝัะต-ะฟัะธะฝัะธะฟั-ะพะฑัะทะฐัะตะปัะฝัะต)
- [ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ](#ะบะปััะตะฒัะต-ะพัะพะฑะตะฝะฝะพััะธ)
- [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
- [ะกัััะบัััะฐ ัะฐะนะปะพะฒ](#ััััะบัััะฐ-ัะฐะนะปะพะฒ)
- [ะกััะฐัะตะณะธั ัะพัะณะพะฒะปะธ](#ัััะฐัะตะณะธั-ัะพัะณะพะฒะปะธ)
- [ะะพะฝัะธะณััะฐัะธั](#ะบะพะฝัะธะณััะฐัะธั)
- [Getting Started](#getting-started-ะฑัััััะน-ััะฐัั)
- [ะะฐะฟััะบ](#ะทะฐะฟััะบ)
- [ะขะตััะธัะพะฒะฐะฝะธะต](#ัะตััะธัะพะฒะฐะฝะธะต)
- [ะะพะฝะธัะพัะธะฝะณ](#ะผะพะฝะธัะพัะธะฝะณ)
- [Troubleshooting](#troubleshooting)
- [Roadmap](#roadmap--todo)
- [Contributing Guidelines](#contributing-guidelines)
- [Performance](#performance)
- [ะะพะฝัะฐะบัั](#ะบะพะฝัะฐะบัั)

## ะงัะพ ััะพ
ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝัะน ัะพัะณะพะฒัะน ะฑะพั ะดะปั ะบัะธะฟัะพะฒะฐะปัั ั Clean Architecture.

## ะััะธัะตะบัััะฝัะต ะพะณัะฐะฝะธัะตะฝะธั (ะะะะขะะงะะ)
- **ะขะพะปัะบะพ SPOT ัะพัะณะพะฒะปั, ัะพะปัะบะพ LONG ะฟะพะทะธัะธะธ** - ะฒัั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ ะฐะดะฐะฟัะธัะพะฒะฐะฝะฐ ะฟะพะด ััะพ
- **ะะธะบะฐะบะธั short-ะฟะพะทะธัะธะน** - ะฐััะธัะตะบัััะฝะพะต ัะตัะตะฝะธะต, ะฝะต ะฒัะตะผะตะฝะฝะพะต ะพะณัะฐะฝะธัะตะฝะธะต
- **ะะฐัะบะตั-ะพัะดะตัะฐ** ะดะปั ะฒัะพะดะพะฒ/ะฒััะพะดะพะฒ (ะปะธะผะธัะฝัะต ัะพะปัะบะพ ะดะปั ััะพะฟ-ะปะพััะพะฒ)

## ะัะฝะพะฒะฝัะต ัะฐัะฐะบัะตัะธััะธะบะธ
- **ะะตะถะธะผั**: paper (ัะตััะพะฒัะน) ะธ live (ะฑะพะตะฒะพะน) ั ะธะดะตะฝัะธัะฝะพะน ะปะพะณะธะบะพะน
- **ะะธัะถะฐ**: Gate.io ัะตัะตะท CCXT (ะฐััะธัะตะบัััะฐ ะฟะพะดะดะตัะถะธะฒะฐะตั ัะฐััะธัะตะฝะธะต ะฝะฐ ะดััะณะธะต ะฑะธัะถะธ)
- **ะััะธัะตะบัััะฐ**: Clean Architecture ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะบะพะฝััะพะปะตะผ ะณัะฐะฝะธั ัะปะพะตะฒ
- **ะขะพัะณะพะฒัะน ัะธะบะป**: ัััะฐัะตะณะธะธ โ ัะธะปัััั โ ัะธัะบะธ โ ะธัะฟะพะปะฝะตะฝะธะต โ ะทะฐัะธัะฐ โ ัะฒะตัะบะฐ โ ะผะพะฝะธัะพัะธะฝะณ

## ะััะธัะตะบัััะฝัะต ะฟัะธะฝัะธะฟั (ะะะฏะะะขะะะฌะะซะ)
1. **ะกััะพะณะพะต ัะฐะทะดะตะปะตะฝะธะต ัะปะพะตะฒ**: app โ core (application โ domain โ infrastructure) โ utils
2. **ะะดะธะฝะฐั ัะพัะบะฐ ะธัะฟะพะปะฝะตะฝะธั**: ะะกะ ัะดะตะปะบะธ ะขะะะฌะะ ัะตัะตะท execute_trade.py
3. **ะะดะตะผะฟะพัะตะฝัะฝะพััั**: ะทะฐัะธัะฐ ะพั ะดัะฑะปะธัะพะฒะฐะฝะธั ะพัะดะตัะพะฒ ัะตัะตะท client_order_id
4. **ะะฒัะพะผะฐัะธัะตัะบะธะน ะบะพะฝััะพะปั**: Import Linter ะฑะปะพะบะธััะตั ะฝะฐัััะตะฝะธั ะณัะฐะฝะธั ัะปะพะตะฒ
5. **ะะดะธะฝัะน ะธััะพัะฝะธะบ ะบะพะฝัะธะณััะฐัะธะธ**: core/infrastructure/settings.py

## ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

### ะะตะทะพะฟะฐัะฝะพััั
- **ะะดะตะผะฟะพัะตะฝัะฝะพััั ะพัะดะตัะพะฒ**: ัะฝะธะบะฐะปัะฝัะน client_order_id ะดะปั ะบะฐะถะดะพะน ัะดะตะปะบะธ
- **ะะฝะพะณะพััะพะฒะฝะตะฒัะต ะปะธะผะธัั**: ะฝะฐ ัะดะตะปะบั, ะฟะพ ะฒัะตะผะตะฝะธ (5ะผ), ัััะพัะฝัะต
- **ะะฐัะธัะฝัะต ััะพะฟ-ะพัะดะตัะฐ**: hard stop-loss ะธ trailing stop  
- **Dead Man's Switch**: ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะทะฐะบัััะธะต ะฟัะธ ะทะฐะฒะธัะฐะฝะธะธ
- **InstanceLock**: ะฑะปะพะบะธัะพะฒะบะฐ ะทะฐะฟััะบะฐ ะฒัะพัะพะณะพ ัะบะทะตะผะฟะปััะฐ
- **Throttling**: ะพะณัะฐะฝะธัะตะฝะธะต ัะฐััะพัั ะทะฐะฟัะพัะพะฒ ะบ ะฑะธัะถะต

### ะะฐะดะตะถะฝะพััั
- **Reconciliation**: ัะตะณัะปััะฝะฐั ัะฒะตัะบะฐ ั ะฑะธัะถะตะน (ะฑะฐะปะฐะฝัั, ะพัะดะตัะฐ, ะฟะพะทะธัะธะธ)
- **Settlement**: ะพะฑัะฐะฑะพัะบะฐ ัะฐััะธัะฝะพ ะฒัะฟะพะปะฝะตะฝะฝัั ะพัะดะตัะพะฒ
- **ะัะพะผะฐัะฝะพััั ะพะฟะตัะฐัะธะน**: ะฒัะต ะบัะธัะธัะฝัะต ะพะฟะตัะฐัะธะธ ะฟะพะฒัะพััะตะผั
- **WAL-ัะตะถะธะผ SQLite**: ะฑะตะทะพะฟะฐัะฝัะน ะฟะฐัะฐะปะปะตะปัะฝัะน ะดะพัััะฟ
- **ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต**: ะฟัะพะดะพะปะถะตะฝะธะต ัะฐะฑะพัั ะฟะพัะปะต ัะฑะพะตะฒ ั ะบะพััะตะบัะฝัะผ ัะพััะพัะฝะธะตะผ

### ะะฐัััะฐะฑะธััะตะผะพััั ะธ ัะฐััะธััะตะผะพััั
- **ะงะธััะฐั ะฐััะธัะตะบัััะฐ**: ัััะพะณะพะต ัะฐะทะดะตะปะตะฝะธะต `app โ application โ domain โ infrastructure โ utils`
- **ะะดะธะฝัะต ัะพัะบะธ ะฒัะพะดะฐ**:
  - `ports.py` โ ะฒัะต ะบะพะฝััะฐะบัั ะผะตะถะดั ัะปะพัะผะธ
  - `events_topics.py` โ ัะตะตััั ะฒัะตั ัะพะฑััะธะน (ะฝะธะบะฐะบะธั magic strings)
  - `execute_trade.py` โ ะตะดะธะฝััะฒะตะฝะฝะฐั ัะพัะบะฐ ะธัะฟะพะปะฝะตะฝะธั ะพัะดะตัะพะฒ
  - `settings.py` โ ะตะดะธะฝัะน ะธััะพัะฝะธะบ ะบะพะฝัะธะณััะฐัะธะธ ั ะฒะฐะปะธะดะฐัะธะตะน
- **Plug & Play ะผะพะดัะปะธ**: ะฝะพะฒัะต ัััะฐัะตะณะธะธ ะธ ะฟัะฐะฒะธะปะฐ ัะธัะบะฐ ะฟะพะดะบะปััะฐัััั ัะตัะตะท DI ะฑะตะท ะธะทะผะตะฝะตะฝะธั ัะดัะฐ
- **AI-ะธะฝัะตะณัะฐัะธั**: ะพะฟัะธะพะฝะฐะปัะฝัะน ัะปะพะน Fusion (ัะตัะฝะธัะตัะบะธะน 65% + AI 35%), ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฐะบัะธะฒะธััะตััั ะฟัะธ ะฝะฐะปะธัะธะธ ะผะพะดะตะปะธ

### ะะฐะฑะปัะดะฐะตะผะพััั
- **Prometheus ะผะตััะธะบะธ**: ะฑะธะทะฝะตั (PnL, ัะดะตะปะบะธ, ัะธัะบะธ) ะธ ัะตัะฝะธัะตัะบะธะต (ะปะฐัะตะฝัะธ, CPU)
- **Health/Ready ัะฝะดะฟะพะธะฝัั**: ะดะตัะฐะปัะฝัะน ััะฐััั ะฒัะตั ะฟะพะดัะธััะตะผ
- **Trace ID**: ัะบะฒะพะทะฝะฐั ะบะพััะตะปััะธั ะฒัะตั ะพะฟะตัะฐัะธะน ะฒ ะปะพะณะฐั ะธ ะผะตััะธะบะฐั
- **ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะปะพะณะธ**: JSON ั ะบะพะฝัะตะบััะพะผ ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ ะฟัะพะฑะปะตะผ

### ะฃะฟัะฐะฒะปะตะฝะธะต ะธ ะพััััะฝะพััั  
- **Telegram-ะฑะพั ัะฟัะฐะฒะปะตะฝะธั**: 
  - ะะพะผะฐะฝะดั: `/status`, `/pnl`, `/today`, `/limits`, `/balance`, `/position`
  - ะฃะฟัะฐะฒะปะตะฝะธะต: `/pause`, `/resume`, `/stop`, `/health`
  - Whitelist ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ัะพะปะตะฒะฐั ะผะพะดะตะปั
- **ะะฒัะพะผะฐัะธัะตัะบะธะต ะฐะปะตััั**: ัะธัะบ-ัะพะฑััะธั, ัะตะถะธะผ ััะฝะบะฐ, ัะธััะตะผะฝัะต ะพัะธะฑะบะธ
- **ะััััั PnL**: FIFO-ััะตั ั ะบะพะผะธััะธัะผะธ, ัััะพัะฝัะต/ะฝะตะดะตะปัะฝัะต ัะฒะพะดะบะธ
- **ะัะดะธั**: ะฒัะต ะพะฟะตัะฐัะธะธ ะทะฐะฟะธััะฒะฐัััั ะฒ ะะ ั timestamp ะธ trace_id

## ะััะธัะตะบัััะฐ

### ะัะธะฝัะธะฟั (ะะะะขะะงะะ ะดะปั ะะ ะธ ัะพะฟัะพะฒะพะถะดะตะฝะธั)

1. **ะะฐะฒะธัะธะผะพััะธ ะธะดัั ะขะะะฌะะ ัะฒะตััั ะฒะฝะธะท** 
   - `app โ application โ domain โ infrastructure โ utils`
   - *Utils โ ะฝะธะทัะธะน ัะปะพะน, ะดะพัััะฟะฝัะน ะฒัะตะผ, ะฝะพ ะฝะธะบะพะณะดะฐ ะฝะต ะทะฐะฒะธัะธั ะพั ะฒัััะธั ัะปะพัะฒ*

2. **Domain ะะ ะะะะะข ะพ ะฒะฝะตัะฝะตะผ ะผะธัะต**
   - ะ `domain` ัะพะปัะบะพ ะฑะธะทะฝะตั-ะฟัะฐะฒะธะปะฐ, ัััะฐัะตะณะธะธ, ัะธัะบ, ัะธะณะฝะฐะปั
   - ะะธะบะฐะบะธั ะธะผะฟะพััะพะฒ ะธะท `app` ะธะปะธ `infrastructure`
   - ะะฑัะตะฝะธะต ั ะฒะฝะตัะฝะธะผ ะผะธัะพะผ ะธะดัั ัะตัะตะท **ะฟะพััั** (ะธะฝัะตััะตะนัั)

3. **Application โ Infrastructure ัะพะปัะบะพ ัะตัะตะท Ports**
   - `application` ัะฐะฑะพัะฐะตั ั `ports.py` (ะบะพะฝััะฐะบัั)
   - `infrastructure` ัะตะฐะปะธะทัะตั ััะธ ะฟะพััั (ะฑัะพะบะตั, ัะธะฝะฐ, ะะ, ะผะฐะบัะพ-ะธััะพัะฝะธะบะธ)
   - ะกะฑะพัะบะฐ (DI) ะดะตะปะฐะตััั ะฒ `app/compose.py`

4. **ะะดะธะฝัะต ัะพัะบะธ ะธััะธะฝั**
   - `ports.py` โ ะบะพะฝััะฐะบัั
   - `events_topics.py` โ ัะพะฑััะธั
   - `settings.py` โ ะบะพะฝัะธะณััะฐัะธั
   - `execute_trade.py` โ ะตะดะธะฝััะฒะตะฝะฝะฐั ัะพัะบะฐ ะพัะบัััะธั ะพัะดะตัะพะฒ
   - `risk/manager.py` โ ะตะดะธะฝัะน ะฐะณัะตะณะฐัะพั ะฟัะฐะฒะธะป ัะธัะบะฐ

5. **Import Linter ะฒ CI**
   - ะะฒัะพะผะฐัะธัะตัะบะธ ะฑะปะพะบะธััะตั ะฝะตะฟัะฐะฒะธะปัะฝัะต ะธะผะฟะพััั
   - ะะธะบัะพ ะฝะต ะผะพะถะตั ยซะพะฑะพะนัะธยป ะฐััะธัะตะบัััั

### ะะธะฐะณัะฐะผะผะฐ ัะปะพัะฒ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    APP                       โ
โ FastAPI, Telegram, CLI, Compose (DI)         โ
โโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
                        โ ะธัะฟะพะปัะทัะตั
โโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโ
โ               APPLICATION                    โ
โ Orchestrator, Use Cases, Reconciliation      โ
โ Ports.py (ะบะพะฝััะฐะบัั)                         โ
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโ
              โ ะธัะฟะพะปัะทัะตั            โ ัะตะฐะปะธะทัะตั
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโ   โโโโโโโโผโโโโโโโโโโโโโโโโโโโโโ
โ          DOMAIN          โ   โ       INFRASTRUCTURE      โ
โ Strategies, Signals,     โ   โ Brokers, DB, Events,      โ
โ Risk, Macro (Regime)     โ   โ Macro Sources (HTTP), DMS โ
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโ   โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
              โ                           โ
              โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโ
                          โ
                   โโโโโโโโผโโโโโโโโ
                   โ    UTILS     โ
                   โ decimal,     โ
                   โ pnl, retry,  โ
                   โ http, trace  โ
                   โโโโโโโโโโโโโโโโ
```

### ะะพะปะธ ัะปะพัะฒ:
- **APP** โ ัะพะปัะบะพ ัะพะฑะธัะฐะตั ะธ ะทะฐะฟััะบะฐะตั
- **APPLICATION** โ ะบะพะพัะดะธะฝะธััะตั ะดะพะผะตะฝ ะธ ะฑะธะทะฝะตั-ะฟัะพัะตััั
- **DOMAIN** โ ัะธััะฐั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ (ะฑะตะท ะทะฐะฒะธัะธะผะพััะตะน ะพั ะฒะฝะตัะฝะตะณะพ ะผะธัะฐ)
- **INFRASTRUCTURE** โ ัะตะฐะปะธะทัะตั ะฒะทะฐะธะผะพะดะตะนััะฒะธะต ั ะฒะฝะตัะฝะธะผะธ ัะธััะตะผะฐะผะธ
- **UTILS** โ ัะตัะฝะธัะตัะบะฐั ะฑะธะฑะปะธะพัะตะบะฐ ะพะฑัะธั ััะฝะบัะธะน

## ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
crypto-ai-bot/
โโโ README.md
โโโ pyproject.toml
โโโ requirements.txt
โโโ Makefile
โโโ Procfile
โโโ importlinter.ini              # ะะพะฝััะพะปั ะฐััะธัะตะบัััะฝัั ะณัะฐะฝะธั
โโโ .env.example
โ
โโโ scripts/                       # ะฃัะธะปะธัั ะพะฑัะปัะถะธะฒะฐะฝะธั
โ  โโโ backup_db.py
โ  โโโ rotate_backups.py
โ  โโโ run_server.sh
โ
โโโ tests/
โ  โโโ unit/
โ  โโโ integration/
โ  โโโ e2e/
โ  โโโ fixtures/                  # ะขะตััะพะฒัะต ะดะฐะฝะฝัะต
โ     โโโ market_data.json
โ     โโโ risk_scenarios.json
โ     โโโ orders.json
โ
โโโ src/crypto_ai_bot/
   โโโ app/                        # ๐ ะะฝะตัะฝะธะต ะธะฝัะตััะตะนัั (ัะพะปัะบะพ ัะฑะพัะบะฐ ะธ ะทะฐะฟััะบ)
   โ  โโโ server.py                # FastAPI ัะฝะดะฟะพะธะฝัั
   โ  โโโ compose.py               # DI ะบะพะผะฟะพะทะธัะธั (ัะฑะพัะบะฐ ะทะฐะฒะธัะธะผะพััะตะน)
   โ  โโโ logging_bootstrap.py     # ะะฝะธัะธะฐะปะธะทะฐัะธั ะปะพะณะธัะพะฒะฐะฝะธั
   โ  โโโ telegram.py              # Telegram publisher (ะพัะฟัะฐะฒะบะฐ)
   โ  โโโ telegram_bot.py          # Telegram bot (ะฟัะธะตะผ ะบะพะผะฐะฝะด)
   โ  โโโ telegram_alerts.py       # Alertmanager โ Telegram ัะพััะธะฝะณ
   โ
   โโโ cli/                        # CLI ััะธะปะธัั (cab-*)
   โ  โโโ smoke.py                 # ะัััััะน ัะตัั ัะธััะตะผั
   โ  โโโ maintenance.py           # ะะฑัะปัะถะธะฒะฐะฝะธะต ะะ
   โ  โโโ reconcile.py            # ะััะฝะฐั ัะฒะตัะบะฐ ั ะฑะธัะถะตะน
   โ  โโโ performance.py          # ะััะตัั PnL
   โ  โโโ health_monitor.py       # ะะพะฝะธัะพัะธะฝะณ ะทะดะพัะพะฒัั
   โ
   โโโ core/
   โ  โโโ application/             # ๐ญ ะะธะทะฝะตั-ะฟัะพัะตััั ะธ ะบะพะพัะดะธะฝะฐัะธั
   โ  โ  โโโ orchestrator.py       # โญ ะะปะฐะฒะฝัะน ะบะพะพัะดะธะฝะฐัะพั ัะธะบะปะพะฒ
   โ  โ  โโโ ports.py             # โญ ะะพะฝััะฐะบัั ะผะตะถะดั ัะปะพัะผะธ
   โ  โ  โโโ events_topics.py     # โญ ะะตะตััั ะฒัะตั ัะพะฑััะธะน
   โ  โ  โโโ protective_exits.py  # ะะพะณะธะบะฐ ััะพะฟ-ะปะพััะพะฒ
   โ  โ  โ
   โ  โ  โโโ use_cases/
   โ  โ  โ  โโโ execute_trade.py  # โญ ะะะะะกะขะะะะะะฏ ัะพัะบะฐ ะธัะฟะพะปะฝะตะฝะธั
   โ  โ  โ  โโโ partial_fills.py  # Settlement ัะฐััะธัะฝัั ะพัะดะตัะพะฒ
   โ  โ  โ
   โ  โ  โโโ reconciliation/       # ะกะฒะตัะบะฐ ั ะฑะธัะถะตะน
   โ  โ  โ  โโโ orders.py
   โ  โ  โ  โโโ positions.py
   โ  โ  โ  โโโ balances.py
   โ  โ  โ
   โ  โ  โโโ regime/
   โ  โ  โ  โโโ gated_broker.py   # ะคะธะปััั ะฟะพ ัะตะถะธะผั ััะฝะบะฐ
   โ  โ  โ
   โ  โ  โโโ policies/             # ะะตัะพะปัะฝัะต ะฟะพะปะธัะธะบะธ
   โ  โ  โ  โโโ intervals.py      # ะะฝัะตัะฒะฐะปั ะฟัะพัะตััะพะฒ
   โ  โ  โ
   โ  โ  โโโ monitoring/
   โ  โ     โโโ health_checker.py # Watchdog ัะธััะตะผั
   โ  โ
   โ  โโโ domain/                  # ๐ ะงะธััะฐั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ
   โ  โ  โโโ risk/
   โ  โ  โ  โโโ manager.py        # โญ ะะณัะตะณะฐัะพั ะฒัะตั risk rules
   โ  โ  โ  โโโ policies.py       # ะะตัะพะปัะฝัะต soft limits
   โ  โ  โ  โโโ rules/            # ะัะฐะฒะธะปะฐ ัะธัะบะฐ:
   โ  โ  โ     โโโ loss_streak.py
   โ  โ  โ     โโโ max_drawdown.py
   โ  โ  โ     โโโ daily_loss.py
   โ  โ  โ     โโโ cooldown.py
   โ  โ  โ     โโโ spread_cap.py
   โ  โ  โ     โโโ correlation.py
   โ  โ  โ
   โ  โ  โโโ strategies/           # ะขะพัะณะพะฒัะต ัััะฐัะตะณะธะธ
   โ  โ  โ  โโโ ema_cross.py
   โ  โ  โ  โโโ rsi_momentum.py
   โ  โ  โ  โโโ bollinger.py
   โ  โ  โ  โโโ strategy_manager.py # ะะณัะตะณะฐัะธั ัััะฐัะตะณะธะน
   โ  โ  โ
   โ  โ  โโโ signals/
   โ  โ  โ  โโโ timeframes.py     # ะะดะฐะฟัะธะฒะฝัะต ะฒะตัะฐ ะขะค
   โ  โ  โ  โโโ fusion.py         # Tech + AI ัะปะธัะฝะธะต
   โ  โ  โ  โโโ ai_model.py       # AI-ะผะพะดะตะปั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
   โ  โ  โ  โโโ feature_pipeline.py
   โ  โ  โ
   โ  โ  โโโ macro/
   โ  โ     โโโ regime_detector.py # โญ 4-ััะพะฒะฝะตะฒัะน ัะตะถะธะผ ััะฝะบะฐ
   โ  โ     โโโ types.py
   โ  โ
   โ  โโโ infrastructure/          # ๐ง ะะตะฐะปะธะทะฐัะธะธ ะฒะฝะตัะฝะธั ัะธััะตะผ
   โ     โโโ settings.py          # โญ ะะะะะกะขะะะะะซะ ะธััะพัะฝะธะบ ะบะพะฝัะธะณััะฐัะธะธ
   โ     โโโ settings_schema.py   # ะะฐะปะธะดะฐัะธั ENV
   โ     โ
   โ     โโโ brokers/             # ะะดะฐะฟัะตัั ะฑะธัะถ
   โ     โ  โโโ base.py
   โ     โ  โโโ factory.py
   โ     โ  โโโ ccxt_adapter.py   # Gate.io ัะตัะตะท CCXT
   โ     โ  โโโ live.py
   โ     โ  โโโ paper.py          # ะญะผัะปััะธั ะดะปั ัะตััะพะฒ
   โ     โ
   โ     โโโ events/              # ะจะธะฝะฐ ัะพะฑััะธะน
   โ     โ  โโโ bus.py            # In-memory
   โ     โ  โโโ bus_adapter.py    # ะัะฑะพั ัะตะฐะปะธะทะฐัะธะธ
   โ     โ  โโโ redis_bus.py      # Redis pub/sub
   โ     โ
   โ     โโโ macro_sources/       # โ ะะะะะะะฌะะะ ะผะตััะพ ะดะปั HTTP-ะฐะดะฐะฟัะตัะพะฒ
   โ     โ  โโโ dxy.py           # HTTP ะธััะพัะฝะธะบ DXY
   โ     โ  โโโ btc_dominance.py # HTTP ะธััะพัะฝะธะบ BTC.D
   โ     โ  โโโ fomc.py          # HTTP ะธััะพัะฝะธะบ FOMC
   โ     โ
   โ     โโโ safety/              # ะะตัะฐะฝะธะทะผั ะฑะตะทะพะฟะฐัะฝะพััะธ
   โ     โ  โโโ dead_mans_switch.py
   โ     โ  โโโ instance_lock.py
   โ     โ
   โ     โโโ storage/             # ะะตััะธััะตะฝัะฝะพััั
   โ        โโโ facade.py         # StoragePort ัะตะฐะปะธะทะฐัะธั
   โ        โโโ sqlite_adapter.py # SQLite engine
   โ        โโโ backup.py
   โ        โโโ migrations/       # SQL ะผะธะณัะฐัะธะธ
   โ           โโโ runner.py
   โ           โโโ V*.sql
   โ
   โโโ utils/                      # ๐ ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
       โโโ decimal.py             # ะะฟะตัะฐัะธะธ ั ะดะตะฝัะณะฐะผะธ
       โโโ pnl.py                # FIFO ัะฐััะตัั
       โโโ metrics.py            # Prometheus ะผะตััะธะบะธ
       โโโ logging.py            # ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะปะพะณะธ
       โโโ retry.py              # Exponential backoff
       โโโ http_client.py        # HTTP ั ัะฐะนะผะฐััะฐะผะธ
       โโโ symbols.py            # ะะพัะผะฐะปะธะทะฐัะธั ะฟะฐั
       โโโ time.py               # UTC ะพะฟะตัะฐัะธะธ
       โโโ trace.py              # Trace ID ะณะตะฝะตัะฐัะธั
```

### ะะปััะตะฒัะต ัะฐะนะปั (ะฟะพะผะตัะตะฝั โญ)
- `orchestrator.py` โ ะณะปะฐะฒะฝัะน ะบะพะพัะดะธะฝะฐัะพั
- `ports.py` โ ะบะพะฝััะฐะบัั ะผะตะถะดั ัะปะพัะผะธ
- `events_topics.py` โ ัะตะตััั ัะพะฑััะธะน
- `execute_trade.py` โ ะตะดะธะฝััะฒะตะฝะฝะฐั ัะพัะบะฐ ะธัะฟะพะปะฝะตะฝะธั
- `risk/manager.py` โ ะฐะณัะตะณะฐัะพั risk rules
- `regime_detector.py` โ 4-ััะพะฒะฝะตะฒัะน ัะตะถะธะผ
- `settings.py` โ ะตะดะธะฝััะฒะตะฝะฝัะน ะธััะพัะฝะธะบ ะบะพะฝัะธะณััะฐัะธะธ

### ะััะธัะตะบัััะฝัะต ะฟัะฐะฒะธะปะฐ ัะฐัะฟะพะปะพะถะตะฝะธั
1. **app/** โ ัะพะปัะบะพ ัะพัะบะธ ะฒัะพะดะฐ ะธ DI
2. **application/** โ ะบะพะพัะดะธะฝะฐัะธั ะธ use cases
3. **domain/** โ ัะธััะฐั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ
4. **infrastructure/** โ ะะกะ ะฒะฝะตัะฝะธะต ะฐะดะฐะฟัะตัั (HTTP, DB, Redis)
5. **utils/** โ ัะตัะฝะธัะตัะบะฐั ะฑะธะฑะปะธะพัะตะบะฐ

## ะกััะฐัะตะณะธั ัะพัะณะพะฒะปะธ

### ะัะฝะพะฒะฝะพะน ะฟัะธะฝัะธะฟ
- **ะขะพัะณะพะฒัะน ัะฐะนะผััะตะนะผ**: 15 ะผะธะฝัั (ะฒัะต ัะธะณะฝะฐะปั ะฒัะพะดะฐ/ะฒััะพะดะฐ)
- **ะะฝะฐะปะธะท ััะตะฝะดะฐ**: ััะฐััะธะต ัะฐะนะผััะตะนะผั (1ั, 4ั, 1ะด, 1ะฝ) ัะพะปัะบะพ ะดะปั ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฝะฐะฟัะฐะฒะปะตะฝะธั
- **ะัะฐะฒะธะปะพ**: ะะ ัะพัะณะพะฒะฐัั ะฟัะพัะธะฒ ััะตะฝะดะฐ ััะฐััะธั ัะฐะนะผััะตะนะผะพะฒ

### ะญัะฐะฟั ัะพัะณะพะฒะพะณะพ ัะธะบะปะฐ

1. **ะะฝะฐะปะธะท ััะตะฝะดะฐ (Trend Confirmation)**
   - **ะะดะฐะฟัะธะฒะฝัะต ะฒะตัะฐ ัะฐะนะผััะตะนะผะพะฒ** (ะฐะฒัะพะผะฐัะธัะตัะบะธ ะบะพััะตะบัะธัััััั ะฟะพ ะฒะพะปะฐัะธะปัะฝะพััะธ):
     - ะะฐะทะพะฒัะต: 1ั (40%), 4ั (30%), 1ะด (20%), 1ะฝ (10%)
     - ะัะธ ะฒััะพะบะพะผ ATR ะฝะฐ ััะฐััะตะผ ะขะค โ ะตะณะพ ะฒะตั ัะฒะตะปะธัะธะฒะฐะตััั
     - ะัะธ ะฝะธะทะบะพะน ะฒะพะปะฐัะธะปัะฝะพััะธ โ ะฒะตั ัะฝะธะถะฐะตััั
     - ะกัะผะผะฐ ะฒะตัะพะฒ ะฒัะตะณะดะฐ = 1.0 (ะฐะฒัะพะฝะพัะผะฐะปะธะทะฐัะธั)
   - ะะตะฐะปะธะทะฐัะธั: `signals/timeframes.py` + `feature_pipeline.py`

2. **ะะตะฝะตัะฐัะธั ัะธะณะฝะฐะปะพะฒ (15m ัะพะปัะบะพ)**
   - ะัะธะผะตะฝัะตะผ ัััะฐัะตะณะธะธ (EMA, RSI, Bollinger) ะฝะฐ 15-ะผะธะฝััะฝะพะผ ะณัะฐัะธะบะต
   - ะัะพะฒะตััะตะผ ัะพะพัะฒะตัััะฒะธะต ััะตะฝะดั ััะฐััะธั ะขะค
   - ะคะธะปััั ะบะฐัะตััะฒะฐ: ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะพะฑััะผะพะผ (TODO)

3. **Fusion (ะพะฟัะธะพะฝะฐะปัะฝะพ)**
   - ะขะตัะฝะธัะตัะบะธะน ัะธะณะฝะฐะป: 65%
   - AI-ะผะพะดะตะปั ัะธะณะฝะฐะป: 35%
   - TODO: ะฝะตะปะธะฝะตะนะฝะพะต ะฟัะฐะฒะธะปะพ (AI < 0.5 โ ััะธะปะตะฝะธะต ััะตะฑะพะฒะฐะฝะธะน ะบ ัะตั.ัะธะณะฝะฐะปั)

4. **ะะณัะตะณะฐัะธั ัััะฐัะตะณะธะน**
   - ะะตะถะธะผั: first (ะฟะตัะฒะฐั), vote (ะณะพะปะพัะพะฒะฐะฝะธะต), weighted (ะฒะทะฒะตัะตะฝะฝัะน)
   - TODO: ะดะธะฝะฐะผะธัะตัะบะธะน ะฒัะฑะพั ัะตะถะธะผะฐ ะฝะฐ ะพัะฝะพะฒะต ััะฐัะธััะธะบะธ

5. **ะคะธะปััั ัะตะถะธะผะฐ ััะฝะบะฐ (Regime Filter) - 4 ัะพััะพัะฝะธั**
   - **ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต** (ะฝะต ัะตัะตะท ENV):
     - `risk_on` (score > 0.5) โ ะฟะพะปะฝัะน ัะฐะทะผะตั ะฟะพะทะธัะธะธ
     - `risk_small` (0 < score โค 0.5) โ 50% ะพั FIXED_AMOUNT
     - `neutral` (-0.5 โค score โค 0) โ ัะพะปัะบะพ ะฒััะพะดั, ะฒัะพะดั ะทะฐะฟัะตัะตะฝั
     - `risk_off` (score < -0.5) โ ะฟะพะปะฝะฐั ะฑะปะพะบะธัะพะฒะบะฐ ะฝะพะฒัั ัะดะตะปะพะบ
   - **ะะฐัััั score** ะฝะฐ ะพัะฝะพะฒะต:
     - DXY ะธะทะผะตะฝะตะฝะธะต โ ะฝะตะณะฐัะธะฒะฝัะน ะฑะฐะปะป ะฟัะธ ัะพััะต
     - BTC.D ะธะทะผะตะฝะตะฝะธะต โ ะฝะตะณะฐัะธะฒะฝัะน ะฑะฐะปะป ะฟัะธ ัะพััะต
     - FOMC ัะพะฑััะธั โ ะฝะตะณะฐัะธะฒะฝัะน ะฑะฐะปะป ะทะฐ N ัะฐัะพะฒ ะดะพ/ะฟะพัะปะต
   - ะะตะฐะปะธะทะฐัะธั: `domain/macro/regime_detector.py` + `gated_broker.py`

6. **Risk Management (ะพะฑัะทะฐัะตะปัะฝัะน ััะฐะฟ)**
   - **ะัะธัะธัะตัะบะธะต ะฟัะฐะฒะธะปะฐ** (ะฟะพะปะฝะฐั ะพััะฐะฝะพะฒะบะฐ):
     - Max Drawdown ะฟัะตะฒััะตะฝ
     - Daily Loss Limit ะดะพััะธะณะฝัั
     - Loss Streak ะบัะธัะธัะตัะบะธะน
   - **ะัะณะบะธะต ะฟัะฐะฒะธะปะฐ** (ัะฝะธะถะตะฝะธะต ัะฐะทะผะตัะฐ ะฟะพะทะธัะธะธ):
     - Cooldown ะฐะบัะธะฒะตะฝ
     - Spread ะฒััะต ััะตะดะฝะตะณะพ
     - Anti-Correlation warning
   - **ะะพะฝะธัะพัะธะฝะณ ะฟัะฐะฒะธะปะฐ** (ัะพะปัะบะพ ะปะพะณะธัะพะฒะฐะฝะธะต):
     - Orders/Turnover ะทะฐ 5 ะผะธะฝัั

7. **ะัะฟะพะปะฝะตะฝะธะต (execute_trade.py)**
   - ะะตะฝะตัะฐัะธั ัะฝะธะบะฐะปัะฝะพะณะพ client_order_id
   - ะัะพะฒะตัะบะฐ ะธะดะตะผะฟะพัะตะฝัะฝะพััะธ
   - Smart retry ั ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝัะผ backoff
   - ะะตัะฐะปัะฝัะน ะปะพะณ ะพัะธะฑะพะบ ะดะปั ะฐะฝะฐะปะธะทะฐ

8. **Protective Exits - ะผะฝะพะณะพัััะฟะตะฝัะฐัะฐั ัะธััะตะผะฐ**
   - **ะัะพะด ะฒ ะฟะพะทะธัะธั**:
     - Hard Stop-Loss: -X% ะพั ะฒัะพะดะฐ
     - Take Profit 1 (TP1): +Y% (ะทะฐะบัััั 50%)
     - Take Profit 2 (TP2): +Z% (ะทะฐะบัััั ะพััะฐัะพะบ)
   - **ะะพัะปะต TP1**: ะฟะตัะตะฒะพะด SL ะฒ ะฑะตะทัะฑััะพะบ
   - **Trailing Stop**: ะฐะบัะธะฒะธััะตััั ะฟะพัะปะต TP1

9. **Settlement & Reconciliation**
   - Settlement: ะพะฑัะฐะฑะพัะบะฐ ัะฐััะธัะฝัั ะธัะฟะพะปะฝะตะฝะธะน
   - Reconciliation: ัะฒะตัะบะฐ ะบะฐะถะดัะต N ัะตะบัะฝะด
   - **ะะปะตััั ะฟัะธ ัะธััะตะผะฐัะธัะตัะบะธั ัะฐััะพะถะดะตะฝะธัั** (>3 ัะฐะทะฐ ะฟะพะดััะด)

10. **Watchdog - ัะฐััะธัะตะฝะฝัะน ะผะพะฝะธัะพัะธะฝะณ**
    - ะะดะพัะพะฒัะต ัะธััะตะผั (ะะ, ะฑัะพะบะตั, ัะธะฝะฐ)
    - **ะะฐะดะตัะถะบะธ API** (ะตัะปะธ >1ัะตะบ ัะธััะตะผะฐัะธัะตัะบะธ)
    - **ะััััััะฒะธะต ัะธะณะฝะฐะปะพะฒ** (ะตัะปะธ >1ั ะฑะตะท ัะธะณะฝะฐะปะพะฒ)
    - **ะะฐะณะธ reconciliation** (ะตัะปะธ ัะฒะตัะบะฐ ะทะฐะฝะธะผะฐะตั >10ัะตะบ)
    - Dead Man's Switch ะฟัะธ ะปัะฑะพะน ะฐะฝะพะผะฐะปะธะธ

## ะะพะฝัะธะณััะฐัะธั

### ะคะธะปะพัะพัะธั ะบะพะฝัะธะณััะฐัะธะธ
- **ENV** = ัะพะปัะบะพ ะบัะธัะธัะฝะพะต (ััะตะดะฐ, ะฑะตะทะพะฟะฐัะฝะพััั, ะบะปััะตะฒัะต ะปะธะผะธัั)
- **ะะพะด** = ัะผะฝัะต ะดะตัะพะปัั, ะฐะดะฐะฟัะธะฒะฝะฐั ะปะพะณะธะบะฐ, ะฟะพะปะธัะธะบะธ
- **Override** = ENV ะผะพะถะตั ะฟะตัะตะพะฟัะตะดะตะปะธัั ะดะตัะพะปัั ะธะท ะบะพะดะฐ (ัะตะดะบะพ)

### ENV ะฟะตัะตะผะตะฝะฝัะต (ัะพะปัะบะพ ะบัะธัะธัะฝัะต)

#### ๐ด ะกัะตะดะฐ ะธ ะฑะตะทะพะฟะฐัะฝะพััั
```env
# ะะฑัะทะฐัะตะปัะฝัะต
MODE=paper|live                    # ะะตะถะธะผ ัะพัะณะพะฒะปะธ
EXCHANGE=gateio                    # ะะธัะถะฐ
SYMBOLS=BTC/USDT,ETH/USDT         # ะขะพัะณะพะฒัะต ะฟะฐัั

# API ะดะพัััะฟ (ะดะปั live)
API_KEY=xxx                        # ะะปัั ะฑะธัะถะธ
API_SECRET=xxx                     # ะกะตะบัะตั ะฑะธัะถะธ
API_TOKEN=random-string            # ะขะพะบะตะฝ HTTP API
```

#### ๐ฐ ะัะธัะธัะตัะบะธะต ัะพัะณะพะฒัะต ะฟะฐัะฐะผะตััั
```env
FIXED_AMOUNT=50                    # ะะฐะทะผะตั ะฟะพะทะธัะธะธ (USDT)

# ะะฐัะธัะฝัะต ะฒััะพะดั
STOP_LOSS_PCT=5.0                  
TRAILING_STOP_PCT=3.0              
TAKE_PROFIT_1_PCT=2.0              
TAKE_PROFIT_2_PCT=5.0              

# ะัะธัะธัะตัะบะธะต ัะธัะบ-ะปะธะผะธัั
RISK_MAX_DRAWDOWN_PCT=10.0        
RISK_DAILY_LOSS_LIMIT_QUOTE=100   
RISK_LOSS_STREAK_COUNT=3          
```

#### ๐ก ะะฝะตัะฝะธะต ัะตัะฒะธัั
```env
# Telegram (ะพะฟัะธะพะฝะฐะปัะฝะพ)
TELEGRAM_BOT_TOKEN=xxx             
TELEGRAM_CHAT_ID=-100xxx           
TELEGRAM_ALLOWED_USERS=123,456     

# ะะฐะบัะพ-ะธััะพัะฝะธะบะธ (URL only)
REGIME_DXY_URL=https://...         
REGIME_BTC_DOM_URL=https://...     
REGIME_FOMC_URL=https://...        

# ะะฝััะฐััััะบัััะฐ
EVENT_BUS_URL=redis://localhost:6379/0  
DB_PATH=./data/trader.sqlite3           
LOG_LEVEL=INFO                          
```

### ะ ะะะะ (ะฝะต ะฒ ENV)

#### domain/signals/timeframes.py
```python
class AdaptiveTimeframeWeights:
    """ะะตัะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะบะพััะตะบัะธัััััั ะฟะพ ATR"""
    BASE_WEIGHTS = {
        '1h': 0.40,
        '4h': 0.30,
        '1d': 0.20,
        '1w': 0.10
    }
    
    def calculate_weights(self, atr_data):
        # ะะดะฐะฟัะธะฒะฝะฐั ะปะพะณะธะบะฐ ะฝะฐ ะพัะฝะพะฒะต ะฒะพะปะฐัะธะปัะฝะพััะธ
        # ะััะพะบะธะน ATR โ ะฑะพะปััะต ะฒะตั ััะพะณะพ ะขะค
        pass
```

#### domain/risk/policies.py
```python
# ะัะณะบะธะต ะฟัะฐะฒะธะปะฐ (ะบะพะฝััะฐะฝัั)
class SoftRiskDefaults:
    COOLDOWN_SEC = 60
    MAX_SPREAD_PCT = 0.5
    MAX_SLIPPAGE_PCT = 1.0
    MAX_ORDERS_5M = 5
    MAX_TURNOVER_5M_QUOTE = 1000
```

#### domain/macro/regime_detector.py
```python
class RegimeThresholds:
    """ะะฒัะพะผะฐัะธัะตัะบะธะน ัะฐััะตั ัะตะถะธะผะฐ"""
    DXY_CHANGE_PCT = 0.35
    BTC_DOM_CHANGE_PCT = 0.60
    FOMC_BLOCK_HOURS = 8
    
    def calculate_score(self) -> RegimeState:
        # ะะพะทะฒัะฐัะฐะตั: risk_on | risk_small | neutral | risk_off
        pass
```

#### application/policies/intervals.py
```python
# ะะฝัะตัะฒะฐะปั ัะพะฝะพะฒัั ะฟัะพัะตััะพะฒ
class BackgroundIntervals:
    RECONCILE_SEC = 60
    SETTLEMENT_SEC = 30
    WATCHDOG_SEC = 3
    HEALTH_CHECK_SEC = 10
```

### ะัะธะพัะธัะตั ะทะฐะณััะทะบะธ
```python
# ะ settings.py
def get_config_value(key, default):
    # 1. ะัะพะฒะตัะธัั ENV
    if env_value := os.getenv(key):
        return env_value
    # 2. ะะตัะฝััั ะดะตัะพะปั ะธะท ะบะพะดะฐ
    return default

# ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
cooldown = get_config_value(
    'RISK_COOLDOWN_SEC',  # ะะตะดะบะธะน override ัะตัะตะท ENV
    SoftRiskDefaults.COOLDOWN_SEC  # ะะฑััะฝะพ ะธะท ะบะพะดะฐ
)
```

### โ ะัะตะธะผััะตััะฒะฐ ะฟะพะดัะพะดะฐ
1. **ENV ะบะพัะพัะบะธะน ะธ ะฟะพะฝััะฝัะน** โ ัะพะปัะบะพ ะบัะธัะธัะฝะพะต
2. **ะะพะณะธะบะฐ ะฒ ะบะพะดะต** โ ะฒะตััะธะพะฝะธััะตััั, ัะตััะธััะตััั
3. **ะะฐะฑะพัะฐะตั ะธะท ะบะพัะพะฑะบะธ** โ ะผะธะฝะธะผัะผ ะบะพะฝัะธะณััะฐัะธะธ
4. **ะะธะฑะบะพััั** โ ะผะพะถะฝะพ ะฟะตัะตะพะฟัะตะดะตะปะธัั ัะตัะตะท ENV ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ

### โ๏ธ ะะฐะปะธะดะฐัะธั ะฟัะธ ะทะฐะฟััะบะต
- ะัะพะฒะตัะบะฐ ะพะฑัะทะฐัะตะปัะฝัั ENV (MODE, EXCHANGE, SYMBOLS)
- ะัะธัะธัะตัะบะธะต ะปะธะผะธัั > 0
- API ะบะปััะธ ะดะปั live ัะตะถะธะผะฐ
- ะัะธ ะพัะธะฑะบะต โ ะดะตัะฐะปัะฝะพะต ัะพะพะฑัะตะฝะธะต ะธ ะฒััะพะด

## Getting Started (ะัััััะน ััะฐัั)

### ะะธะฝะธะผะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั
- Python 3.11+
- 512 MB RAM
- 1 GB ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ (ะะ + ะปะพะณะธ)
- ะกัะฐะฑะธะปัะฝะพะต ะธะฝัะตัะฝะตั-ัะพะตะดะธะฝะตะฝะธะต

### ะะตัะฒัะน ะทะฐะฟััะบ ะทะฐ 5 ะผะธะฝัั
```bash
# 1. ะะปะพะฝะธัะพะฒะฐัั ะฟัะพะตะบั
git clone <repo> && cd crypto-ai-bot

# 2. ะกะพะทะดะฐัั ะพะบััะถะตะฝะธะต
python -m venv .venv
source .venv/bin/activate  # Windows: .\.venv\Scripts\Activate.ps1
pip install -e .

# 3. ะะธะฝะธะผะฐะปัะฝะฐั ะบะพะฝัะธะณััะฐัะธั
cat > .env << EOF
MODE=paper
EXCHANGE=gateio
SYMBOLS=BTC/USDT
FIXED_AMOUNT=50
LOG_LEVEL=INFO
EOF

# 4. Smoke Test
cab-smoke

# 5. ะะฐะฟััะบ
uvicorn crypto_ai_bot.app.server:app

# 6. ะัะพะฒะตัะบะฐ
curl http://localhost:8000/health
```

## ะะฐะฟััะบ

### ะะตะถะธะผั ะทะฐะฟััะบะฐ

#### Paper Trading (ัะตััะพะฒัะน)
```env
MODE=paper
# API ะบะปััะธ ะะ ะฝัะถะฝั
# ะญะผัะปััะธั ะพัะดะตัะพะฒ ะปะพะบะฐะปัะฝะพ
```

#### Live Trading (ะฑะพะตะฒะพะน)
```env
MODE=live
API_KEY=xxx       # ะะะฏะะะขะะะฌะะ
API_SECRET=xxx    # ะะะฏะะะขะะะฌะะ
```

### CLI ะบะพะผะฐะฝะดั (cab-*)
```bash
# ะขะตััะธัะพะฒะฐะฝะธะต
cab-smoke                # ะััััะฐั ะฟัะพะฒะตัะบะฐ ะฒัะตั ัะธััะตะผ

# ะะฐะทะฐ ะดะฐะฝะฝัั
cab-maintenance backup   # ะะตะทะตัะฒะฝะฐั ะบะพะฟะธั ะะ
cab-maintenance vacuum   # ะะฟัะธะผะธะทะฐัะธั ะะ
cab-maintenance integrity # ะัะพะฒะตัะบะฐ ัะตะปะพััะฝะพััะธ

# ะะฟะตัะฐัะธะธ
cab-reconcile           # ะััะฝะฐั ัะฒะตัะบะฐ ั ะฑะธัะถะตะน
cab-perf               # ะััะตั PnL ะทะฐ ัััะบะธ

# ะะพะฝะธัะพัะธะฝะณ
cab-health-monitor --oneshot  # ะัะพะฒะตัะบะฐ health ััะฐัััะฐ
```

### HTTP API ัะฝะดะฟะพะธะฝัั
```bash
# ะกัะฐััั ะธ ะผะพะฝะธัะพัะธะฝะณ
GET  /health              # ะะตัะฐะปัะฝัะน ััะฐััั ะฒัะตั ัะธััะตะผ
GET  /ready               # ะะพัะพะฒะฝะพััั (200 OK ะธะปะธ 503)
GET  /metrics             # Prometheus ะผะตััะธะบะธ

# ะฃะฟัะฐะฒะปะตะฝะธะต (ััะตะฑัะตั API_TOKEN)
GET  /orchestrator/status?symbol=BTC/USDT
POST /orchestrator/start?symbol=BTC/USDT   # Headers: Authorization: Bearer <API_TOKEN>
POST /orchestrator/pause?symbol=BTC/USDT
POST /orchestrator/resume?symbol=BTC/USDT
POST /orchestrator/stop?symbol=BTC/USDT

# ะััะตัั
GET  /pnl/today?symbol=BTC/USDT
```

### Telegram ะบะพะผะฐะฝะดั
```bash
/status    # ะกัะฐััั ะฒัะตั ัะพัะณะพะฒัั ะฟะฐั
/pnl       # PnL ะดะตัะฐะปัะฝัะน
/today     # ะกะฒะพะดะบะฐ ะทะฐ ะดะตะฝั
/balance   # ะะฐะปะฐะฝั ััะตัะฐ
/position  # ะัะบััััะต ะฟะพะทะธัะธะธ
/limits    # ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะปะธะผะธัะพะฒ

# ะฃะฟัะฐะฒะปะตะฝะธะต
/pause     # ะัะธะพััะฐะฝะพะฒะธัั ัะพัะณะพะฒะปั
/resume    # ะะพะทะพะฑะฝะพะฒะธัั ัะพัะณะพะฒะปั
/stop      # ะััะฐะฝะพะฒะธัั ะฑะพัะฐ
/health    # ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
```

### Production ะดะตะฟะปะพะน

#### Railway/Heroku
```yaml
# Procfile
web: uvicorn crypto_ai_bot.app.server:app --host 0.0.0.0 --port $PORT
worker: cab-health-monitor --daemon
```

#### Docker
```dockerfile
# Dockerfile (ะฑะฐะทะพะฒัะน)
FROM python:3.11-slim
WORKDIR /app
COPY . .
RUN pip install -e .
CMD ["uvicorn", "crypto_ai_bot.app.server:app", "--host", "0.0.0.0", "--port", "8000"]
```

#### Systemd
```ini
# /etc/systemd/system/crypto-bot.service
[Service]
ExecStart=/path/to/venv/bin/uvicorn crypto_ai_bot.app.server:app
Restart=always
Environment="PATH=/path/to/venv/bin"
```

### โ๏ธ ะะฐะถะฝะพ ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ
1. **InstanceLock** ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะตะดะพัะฒัะฐัะฐะตั ะดะฒะพะนะฝะพะน ะทะฐะฟััะบ
2. **Dead Man's Switch** ะทะฐะบัะพะตั ะฟะพะทะธัะธะธ ะฟัะธ ะทะฐะฒะธัะฐะฝะธะธ
3. **Reconciliation** ะธัะฟัะฐะฒะธั ัะฐััะพะถะดะตะฝะธั ั ะฑะธัะถะตะน
4. **Health endpoint** ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะฒะฝะตัะฝะธะผะธ ัะธััะตะผะฐะผะธ

## ะขะตััะธัะพะฒะฐะฝะธะต

### ะฃัะพะฒะฝะธ ัะตััะธัะพะฒะฐะฝะธั

#### 1. Smoke Test (ะฑััััะฐั ะฟัะพะฒะตัะบะฐ)
```bash
cab-smoke  # ~5 ัะตะบัะฝะด
# โ ะะพะดะบะปััะตะฝะธะต ะบ ะฑะธัะถะต (paper mode)
# โ ะะฝะธัะธะฐะปะธะทะฐัะธั ะะ
# โ ะะพะปะฝัะน ัะธะบะป: ัะธะณะฝะฐะป โ ัะธัะบ โ mock-ะพัะดะตั
```

#### 2. Unit Tests (ะบะพะผะฟะพะฝะตะฝัั)
```bash
pytest tests/unit -v --cov --cov-fail-under=80
# ะคะพะบัั:
# - ะะฐะถะดะพะต risk rule ะพัะดะตะปัะฝะพ
# - ะกััะฐัะตะณะธะธ ะฝะฐ ัะตััะพะฒัั ะดะฐะฝะฝัั
# - ะะดะตะผะฟะพัะตะฝัะฝะพััั ะพัะดะตัะพะฒ
# - PnL ัะฐััะตัั (FIFO)
```

#### 3. Integration Tests (ัะฒัะทะบะธ)
```bash
pytest tests/integration -m "not slow"
# - Orchestrator โ RiskManager โ ExecuteTrade
# - Reconciliation ั mock ะฑะธัะถะตะน
# - EventBus โ Telegram mock
# - Settlement ัะฐััะธัะฝัั ะพัะดะตัะพะฒ
```

#### 4. E2E Test (ะฟะพะปะฝัะน ะฟัะพะณะพะฝ)
```bash
pytest tests/e2e --paper-mode --duration=2h
# - ะะฐะฟััะบ ะฒ paper mode ะฝะฐ 2 ัะฐัะฐ
# - ะะตะฐะปัะฝัะต ััะฝะพัะฝัะต ะดะฐะฝะฝัะต
# - ะคะธะบัะฐัะธั ะฒัะตั ัะพะฑััะธะน
# - ะกัะฐะฒะฝะตะฝะธะต ั ััะฐะปะพะฝะฝัะผ ะฟัะพะณะพะฝะพะผ
```

#### 5. Static Analysis
```bash
# ะััะธัะตะบัััะฝัะต ะณัะฐะฝะธัั (ะะะะขะะงะะ)
import-linter --config importlinter.ini

# ะขะธะฟั
mypy src/crypto_ai_bot --strict

# ะะฐัะตััะฒะพ ะบะพะดะฐ
ruff check src/

# ะกะตะบัะตัั (pre-commit hook)
detect-secrets scan
```

### Test Fixtures
```
tests/fixtures/
โโโ market_data.json         # OHLCV ะดะฐะฝะฝัะต ะดะปั ัััะฐัะตะณะธะน
โโโ risk_scenarios.json      # Edge-cases ะดะปั risk rules
โโโ orders.json              # ะงะฐััะธัะฝัะต ะธัะฟะพะปะฝะตะฝะธั, phantom orders
โโโ regime_states.json       # ะกะพััะพัะฝะธั ัะตะถะธะผะฐ (risk_on/off/small/neutral)
โโโ reconciliation_cases.json # ะะฐััะพะถะดะตะฝะธั ะฑะธัะถะฐ/ะะ
```

### ะัะธัะธัะฝัะต ัะตัั-ะบะตะนัั

#### ะะตะทะพะฟะฐัะฝะพััั ะธ ะฝะฐะดะตะถะฝะพััั
```python
# ะะดะตะผะฟะพัะตะฝัะฝะพััั
def test_no_duplicate_orders()
def test_idempotency_after_restart()

# ะะฐัะธัะฐ ะพั ะดะฒะพะนะฝะพะณะพ ะทะฐะฟััะบะฐ
def test_instance_lock()
def test_instance_lock_cleanup_on_crash()

# Dead Man's Switch
def test_dms_triggers_on_freeze()
def test_dms_closes_position_correctly()

# Rate limiting
def test_api_rate_limit_throttling()
def test_burst_protection()
```

#### Risk Management
```python
# ะัะธัะธัะตัะบะธะต ะฟัะฐะฒะธะปะฐ (ะฟะพะปะฝะฐั ะพััะฐะฝะพะฒะบะฐ)
def test_loss_streak_blocks_all()
def test_daily_limit_stops_trading()
def test_max_drawdown_emergency_stop()

# ะัะณะบะธะต ะฟัะฐะฒะธะปะฐ (ัะฝะธะถะตะฝะธะต ัะฐะทะผะตัะฐ)
def test_cooldown_delays_next_trade()
def test_spread_blocks_entry_not_exit()

# ะะตะถะธะผั ััะฝะบะฐ
def test_neutral_mode_blocks_entry_allows_exit()
def test_risk_small_reduces_position_50pct()
def test_risk_off_blocks_all_entries()
```

#### Protective Exits
```python
def test_trailing_stop_moves_up_only()
def test_tp1_moves_sl_to_breakeven()
def test_multi_stage_exit_execution()
```

#### Reconciliation
```python
def test_position_mismatch_auto_corrected()
def test_phantom_order_cleanup()
def test_systematic_mismatch_alerts()
```

### CI/CD Pipeline
```yaml
# .github/workflows/ci.yml
name: CI
on: [push, pull_request]

jobs:
  security:
    - detect-secrets scan
    - safety check (dependencies)
  
  quality:
    - import-linter (architecture)
    - mypy (types)
    - ruff (style)
    
  tests:
    - pytest unit --cov-fail-under=80
    - pytest integration
    - cab-smoke
    
  e2e:
    - if: branch == main
      run: pytest e2e --paper-mode --duration=1h
```

### ะกะฟะตัะธะฐะปัะฝัะต ะฟัะฐะฒะธะปะฐ ัะตััะธัะพะฒะฐะฝะธั

#### ะัะธ ะธะทะผะตะฝะตะฝะธะธ ะบัะธัะธัะฝัั ะผะพะดัะปะตะน
```bash
# risk/manager.py ะธะทะผะตะฝะตะฝ
make test-risk-all

# execute_trade.py ะธะทะผะตะฝะตะฝ  
make test-idempotency
make test-settlement

# reconciliation/* ะธะทะผะตะฝะตะฝ
make test-reconciliation-suite

# regime_detector.py ะธะทะผะตะฝะตะฝ
make test-regime-states
```

### PR Checklist (ะพะฑัะทะฐัะตะปัะฝะพ)
- [ ] ะะพะฒะฐั ัะธัะฐ = ะฝะพะฒัะน ัะตัั
- [ ] CI ะทะตะปะตะฝัะน
- [ ] Coverage > 80%
- [ ] Import Linter passed
- [ ] No secrets in code
- [ ] Risk rules ะฟัะพัะตััะธัะพะฒะฐะฝั ะฝะฐ ะฒัะตั ััะตะฝะฐัะธัั

### ะะพะบะฐะปัะฝัะน ะฟัะพะณะพะฝ ะฒัะตะณะพ
```bash
make test-all  # ะะฐะฟััะบะฐะตั ะฟะพะปะฝัะน ัะธะบะป ะฟัะพะฒะตัะพะบ
```

## ะะพะฝะธัะพัะธะฝะณ

### ะงัะพ ะฟัะตะดะพััะฐะฒะปัะตั ะฑะพั

#### ะญะฝะดะฟะพะธะฝัั
```bash
# ะะตัะฐะปัะฝะพะต ัะพััะพัะฝะธะต (JSON)
curl http://localhost:8000/health

# ะะพัะพะฒะฝะพััั (200 ะธะปะธ 503)
curl http://localhost:8000/ready

# Prometheus ะผะตััะธะบะธ
curl http://localhost:8000/metrics | grep crypto_
```

#### ะะตััะธะบะธ (ัะบัะฟะพััะธััะตะผัะต ะฑะพัะพะผ)

**ะะธะทะฝะตั-ะผะตััะธะบะธ**
```prometheus
crypto_pnl_realized_total{symbol="BTC/USDT"}
crypto_trades_total{symbol="BTC/USDT", status="completed"}
crypto_position_size{symbol="BTC/USDT"}
crypto_risk_blocked_total{rule="loss_streak"}
crypto_regime_state{state="risk_on|risk_small|neutral|risk_off"}
```

**ะขะตัะฝะธัะตัะบะธะต ะผะตััะธะบะธ**
```prometheus
crypto_cycle_duration_ms{phase="signals|risk|execute"}
crypto_api_latency_ms{endpoint="ticker|order"}
crypto_reconciliation_duration_ms
crypto_health_status{component="db|broker|eventbus"}
```

#### ะกัััะบัััะธัะพะฒะฐะฝะฝัะต ะปะพะณะธ
```json
{
  "timestamp": "2025-01-10T12:00:00Z",
  "level": "INFO",
  "trace_id": "abc123",  // ะะะฏะะะขะะะฌะะ ะดะปั ะบะฐะถะดะพะณะพ ัะธะบะปะฐ
  "module": "orchestrator",
  "symbol": "BTC/USDT",
  "message": "Signal generated",
  "context": {...}
}
```

### Trace ID (ะบัะธัะธัะฝะพ)
- **ะะฐะถะดัะน ัะธะบะป orchestrator** ะณะตะฝะตัะธััะตั ัะฝะธะบะฐะปัะฝัะน trace_id
- **ะัะพะฑัะฐััะฒะฐะตััั** ัะตัะตะท ะฒัะต ะพะฟะตัะฐัะธะธ (ะปะพะณะธ, ะผะตััะธะบะธ, ัะพะฑััะธั)
- **ะะธะดะฝะพ ะฒ Telegram** ะฐะปะตััะฐั ะดะปั ะบะพััะตะปััะธะธ
- **ะกะฒัะทัะฒะฐะตั** ะผะตััะธะบะธ โ ะปะพะณะธ โ ะฐะปะตััั

### ะะฝะตัะฝะธะน ะผะพะฝะธัะพัะธะฝะณ

โ๏ธ **ะัั ะธะฝััะฐััััะบัััะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะฒ ะพัะดะตะปัะฝะพะผ ัะตะฟะพะทะธัะพัะธะธ:**
```
https://github.com/YOUR_ORG/crypto-bot-monitoring
```

ะขะฐะผ ะฝะฐัะพะดัััั:
- Prometheus ะบะพะฝัะธะณััะฐัะธั (scrape jobs, retention 30 ะดะฝะตะน)
- Alertmanager ะฟัะฐะฒะธะปะฐ ะธ ัะพััะธะฝะณ
- Grafana ะดะฐัะฑะพัะดั (PnL, Risk, Performance ะฟะฐะฝะตะปะธ)
- Docker Compose ะดะปั ะดะตะฟะปะพั ััะตะบะฐ
- Terraform/Ansible ัะบัะธะฟัั

### Alert Rules (ะพัะฝะพะฒะฝัะต)

#### ะัะธัะธัะตัะบะธะต (ะดะตะนััะฒะธะต ะฝะตะผะตะดะปะตะฝะฝะพ)
```yaml
BotDown: up == 0 for 1m
DeadMansSwitchTriggered: crypto_dms_triggered_total > 0
MaxDrawdownExceeded: crypto_drawdown_current_pct > 10
```

#### ะะฐะถะฝัะต (ะฟัะพะฒะตัะธัั ะฒ ัะตัะตะฝะธะต ัะฐัะฐ)
```yaml
NoTradesLongTime: rate(crypto_trades_total[1h]) == 0 for 2h
HighAPILatency: crypto_api_latency_ms > 1000 for 5m
NeutralTooLong: crypto_regime_state == "neutral" for 4h
```

#### ะะฝัะพัะผะฐัะธะพะฝะฝัะต
```yaml
RiskBlockedFrequent: rate(crypto_risk_blocked_total[5m]) > 0.5
RegimeChanged: crypto_regime_state != offset 5m
```

### Telegram ะธะฝัะตะณัะฐัะธั
- **ะัะธัะธัะตัะบะธะต** โ ะผะณะฝะพะฒะตะฝะฝะพ ั trace_id
- **ะะฐะถะฝัะต** โ ะฑะฐััะธะฝะณ 5 ะผะธะฝัั
- **ะะฝัะพ** โ ัะฒะพะดะบะฐ ัะฐะท ะฒ ัะฐั
- **Anti-spam** ะทะฐัะธัะฐ ะพั ะดัะฑะปะตะน

### Retention ะฟะพะปะธัะธะบะฐ
- **ะะตััะธะบะธ Prometheus**: 30 ะดะฝะตะน (ะบะพะฝัะธะณ ะฒ crypto-bot-monitoring)
- **ะะพะณะธ**: 90 ะดะฝะตะน (ัะพัะฐัะธั ัะตัะตะท logrotate ะธะปะธ cloud provider)
- **ะะ ะฑัะบะฐะฟั**: 7 ะดะฝะตะน daily, 4 ะฝะตะดะตะปะธ weekly

### ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

#### ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
```bash
# ะััััะฐั ะฟัะพะฒะตัะบะฐ
curl -s http://localhost:8000/ready && echo "OK" || echo "FAIL"

# ะะตัะฐะปัะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ
curl -s http://localhost:8000/health | jq .components
```

#### ะะพะธัะบ ะฟะพ trace_id
```bash
# ะ ะปะพะณะฐั
grep "trace_id.*abc123" /var/log/crypto-bot.log

# ะ ะผะตััะธะบะฐั
curl http://localhost:8000/metrics | grep 'trace_id="abc123"'
```

### โ๏ธ ะัะฐะฒะธะปะฐ ะผะพะฝะธัะพัะธะฝะณะฐ
1. **ะะตััะธะบะธ ะฝะต ะฑะปะพะบะธัััั ัะพัะณะพะฒะปั** (async export)
2. **ะะปะตััั actionable** (ะฝะต ััะผ, ะฐ ะบะพะฝะบัะตัะฝัะต ะดะตะนััะฒะธั)
3. **Trace ID ะพะฑัะทะฐัะตะปะตะฝ** ะดะปั ะฒัะตั ะพะฟะตัะฐัะธะน
4. **Dashboard real-time** (ะพะฑะฝะพะฒะปะตะฝะธะต 15 ัะตะบ)
5. **Separation of concerns**: ะฑะพั ัะพะปัะบะพ ัะบัะฟะพััะธััะตั, ะผะพะฝะธัะพัะธะฝะณ ะฒ ะพัะดะตะปัะฝะพะผ ัะตัะฒะธัะต

## Troubleshooting

### InstanceLock ะฝะต ะพัะฒะพะฑะพะถะดะฐะตััั
**ะกะธะผะฟัะพะผ:** "Instance already running"

**ะะตัะตะฝะธะต:**
```bash
rm -f /tmp/crypto-bot.lock
# ะัะปะธ Redis:
redis-cli DEL crypto-bot:instance:lock
```

### Reconciliation ะฒัะตะณะดะฐ ะฝะฐัะพะดะธั ัะฐััะพะถะดะตะฝะธั
```bash
timedatectl   # ะัะพะฒะตัะธัั, ััะพ ัะตัะฒะตั ะฒ UTC
cab-reconcile --force-sync
```

### Risk Manager ะฑะปะพะบะธััะตั ะฒัะต ัะดะตะปะบะธ
```bash
curl http://localhost:8000/orchestrator/status?symbol=BTC/USDT
# ะกะฑัะพั ะดะฝะตะฒะฝัั ัััััะธะบะพะฒ (ะพััะพัะพะถะฝะพ!)
sqlite3 data/trader.sqlite3 "DELETE FROM risk_counters WHERE date < date('now')"
```

### Telegram ะฝะต ัะฐะฑะพัะฐะตั
```bash
curl https://api.telegram.org/bot<TOKEN>/getMe
curl https://api.telegram.org/bot<TOKEN>/getUpdates
```

## Roadmap / TODO

### ะ ัะฐะทัะฐะฑะพัะบะต (v1.1)
- [ ] Multi-stage exits (TP1/TP2 + SL ะฒ ะฑะตะทัะฑััะพะบ)
- [ ] ะะดะฐะฟัะธะฒะฝัะต ะฒะตัะฐ ัะฐะนะผััะตะนะผะพะฒ (ATR)
- [ ] 4-ััะพะฒะฝะตะฒัะน ัะตะถะธะผ ััะฝะบะฐ (risk_on/small/neutral/off)
- [ ] ะะตะปะธะฝะตะนะฝัะน Fusion (AI confidence โ tech weight)

### ะะปะฐะฝะธััะตััั (v1.2)
- [ ] ะะฝะพะถะตััะฒะตะฝะฝัะต ะฑะธัะถะธ
- [ ] Grid-trading ะดะปั ัะปััะฐ
- [ ] Basket-trading (ะบะพัะทะธะฝะฐ ะฐะบัะธะฒะพะฒ)
- [ ] Web-ะธะฝัะตััะตะนั ะผะพะฝะธัะพัะธะฝะณะฐ

### Backlog (ะธะดะตะธ)
- [ ] Short ะฟะพะทะธัะธะธ (ััะตะฑัะตั ัะตะดะธะทะฐะนะฝะฐ)
- [ ] Options/Futures
- [ ] Social sentiment ะฐะฝะฐะปะธะท
- [ ] ML-ะพะฟัะธะผะธะทะฐัะธั ะฟะฐัะฐะผะตััะพะฒ

## Contributing Guidelines

### ะััะธัะตะบัััะฝัะต ะฟัะฐะฒะธะปะฐ
- Domain **ะฝะต ะธะผะฟะพััะธััะตั** ะธะท Infrastructure
- Application ัะฐะฑะพัะฐะตั **ัะพะปัะบะพ ัะตัะตะท Ports**
- ะะพะฒัะต ะฐะดะฐะฟัะตัั โ ัะพะปัะบะพ ะฒ `infrastructure/`

### ะะดะธะฝัะต ัะพัะบะธ ะฒัะพะดะฐ
- ะะพะฒัะต ัะพะฑััะธั โ `events_topics.py`
- ะะพะฒัะต ะฝะฐัััะพะนะบะธ โ ัะฝะฐัะฐะปะฐ ะฒ ะบะพะด, ะฟะพัะพะผ ะฒ ENV
- ะัะดะตัะฐ โ ัะพะปัะบะพ ัะตัะตะท `execute_trade.py`

### ะะพะฑะฐะฒะปะตะฝะธะต ัััะฐัะตะณะธะธ
```python
# domain/strategies/my_strategy.py
class MyStrategy(BaseStrategy):
    def generate_signal(self, data) -> Signal:
        pass

# strategy_manager.py
AVAILABLE_STRATEGIES['my_strategy'] = MyStrategy
```

### ะะพะฑะฐะฒะปะตะฝะธะต risk rules
```python
# domain/risk/rules/my_rule.py
class MyRule(BaseRule):
    def check(self, context) -> RuleResult:
        pass

# risk/manager.py
self.rules.append(MyRule())
```

### Checklist ะฟะตัะตะด ะบะพะผะผะธัะพะผ
- [ ] `make test-all` ะทะตะปัะฝัะน
- [ ] Import Linter ะฝะต ััะณะฐะตััั
- [ ] ะะพะฒัะน ะบะพะด ะฟะพะบััั ัะตััะฐะผะธ
- [ ] Trace ID ะฟัะพะฑัะฐััะฒะฐะตััั
- [ ] ะกะพะฑััะธั ะธัะฟะพะปัะทััั `events_topics.py`
- [ ] README ะพะฑะฝะพะฒะปัะฝ

## Performance

### ะกัะตะดะฝะธะต ะฟะพะบะฐะทะฐัะตะปะธ
- **RAM**: 200โ300 MB (idle), ะดะพ 500 MB ะฟัะธ ะฐะบัะธะฒะฝะพะน ัะพัะณะพะฒะปะต
- **CPU**: <5% ััะตะดะฝะตะต, ะฟะธะบะธ ะดะพ 20% (reconciliation)
- **ะะฐัะตะฝัะธ ัะธะบะปะฐ**: 50โ200 ms
- **API**: ~500 ะทะฐะฟัะพัะพะฒ/ัะฐั (ticker), ~20/ัะฐั (orders)
- **ะะ**: ~10 MB/ะผะตััั/ะฟะฐัะฐ
- **ะะพะณะธ**: ~100 MB/ะดะตะฝั (INFO)

### ะะฟัะธะผะธะทะฐัะธั
- WAL mode SQLite (ะฟะพ ัะผะพะปัะฐะฝะธั)
- Redis EventBus ะฟัะธ >3 ะฟะฐัะฐั
- `LOG_LEVEL=WARNING` ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ
- ะฃะฒะตะปะธัะธัั `RECONCILE_INTERVAL_SEC` ะฟัะธ ัะตะดะบะธั ัะดะตะปะบะฐั

## ะะพะฝัะฐะบัั

ะัะพะตะบั ะฟะพะดะดะตัะถะธะฒะฐะตััั ะธ ัะฐะทะฒะธะฒะฐะตััั ะฒะฝัััะธ ะบะพะผะฐะฝะดั. ะะปั ะฒะพะฟัะพัะพะฒ ะฟะพ ะฐััะธัะตะบัััะต ะธะปะธ ะฒะฝะตัะตะฝะธั ะฒะบะปะฐะดะฐ ะฒั ะผะพะถะตัะต ัะฒัะทะฐัััั ั ะฐะฒัะพัะพะผ ะธ ะณะปะฐะฒะฝัะผ ัะฐะทัะฐะฑะพััะธะบะพะผ: **Sabir ลahbaz** (GitHub: sabiraka1).

ะะปั ะฝะพะฒัั ััะฐััะฝะธะบะพะฒ ะบะพะผะฐะฝะดั: ะฟะพ ะฒัะตะผ ะพัะณะฐะฝะธะทะฐัะธะพะฝะฝัะผ ะผะพะผะตะฝัะฐะผ (ะดะพัััะฟั ะบ Railway, ะฟะตัะตะผะตะฝะฝัะผ ะพะบััะถะตะฝะธั, ะบะปััะฐะผ API) ะพะฑัะฐัะฐะนัะตัั ะบ ัะธะผะปะธะดั ะธะปะธ DevOps ะธะฝะถะตะฝะตัั.

ะกะฟะฐัะธะฑะพ ะทะฐ ะธะฝัะตัะตั ะบ ะฟัะพะตะบัั crypto-ai-bot! ะะฐะดะตะตะผัั, ััะพั README ะฟะพะผะพะถะตั ะฒะฐะผ ัะพะฑะปัะดะฐัั ะฐััะธัะตะบัััะฝัั ัะตะปะพััะฝะพััั ะฟัะธ ัะฐะทัะฐะฑะพัะบะต.