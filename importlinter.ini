[importlinter]
root_package = crypto_ai_bot
include_external_packages = False

# Слои: utils -> core -> app (строго в одну сторону)
[contract:layers]
name = clean_layers
type = layers
layers =
    crypto_ai_bot.utils
    crypto_ai_bot.core
    crypto_ai_bot.app

# Запрет на ТОР level пакет "utils" (только пакетный путь)
[contract:forbid_top_level_utils_import]
name = forbid_top_level_utils_import
type = forbidden
source_modules =
    crypto_ai_bot
forbidden_modules =
    utils

# App не тянет внутренности стораджа (только фасад)
[contract:app_no_storage_internals]
name = app_must_not_import_storage_internals
type = forbidden
source_modules =
    crypto_ai_bot.app
forbidden_modules =
    crypto_ai_bot.core.storage.repositories
    crypto_ai_bot.core.storage.migrations
