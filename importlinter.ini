# importlinter.ini
[importlinter]
root_package = crypto_ai_bot

# App (FastAPI, адаптеры) может импортировать Core и Utils.
# Core (бизнес-логика) может импортировать Utils.
# Utils (инфра-утилиты) не имеет права импортировать Core/App.
[contract:layering]
name = App -> Core -> Utils layering
type = layers
layers =
    crypto_ai_bot.app
    crypto_ai_bot.core
    crypto_ai_bot.utils

# Запрещаем прямой HTTP вне utils.http_client.
[contract:forbid_http]
name = No direct HTTP outside utils.http_client
type = forbidden
source_modules =
    crypto_ai_bot
forbidden_modules =
    requests
    httpx
ignore_imports =
    crypto_ai_bot.utils.http_client -> requests
    crypto_ai_bot.utils.http_client -> httpx
