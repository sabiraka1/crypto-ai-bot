[importlinter]
root_package = crypto_ai_bot
include_external_packages = False
verbose = True

[contract:layers]
name = Layered architecture must be respected
type = layers
layers =
    crypto_ai_bot.utils
    crypto_ai_bot.core.domain
    crypto_ai_bot.core.application
    crypto_ai_bot.core.infrastructure
    crypto_ai_bot.app
    crypto_ai_bot.cli

# Дополнительные запреты на всякий случай (явные)
[contract:forbid_domain_upwards]
name = Domain must not import upwards
type = forbid
source_modules =
    crypto_ai_bot.core.domain
forbidden_modules =
    crypto_ai_bot.core.application
    crypto_ai_bot.core.infrastructure
    crypto_ai_bot.app
    crypto_ai_bot.cli

[contract:forbid_utils_upwards]
name = Utils must not import upwards
type = forbid
source_modules =
    crypto_ai_bot.utils
forbidden_modules =
    crypto_ai_bot.core.domain
    crypto_ai_bot.core.application
    crypto_ai_bot.core.infrastructure
    crypto_ai_bot.app
    crypto_ai_bot.cli

[contract:independence_app_cli]
name = app and cli should be independent
type = independence
modules =
    crypto_ai_bot.app
    crypto_ai_bot.cli
